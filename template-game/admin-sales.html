<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Ventas - GGDeals</title>
    
    <link rel="shortcut icon" href="./assets/compiled/svg/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="./assets/compiled/css/app.css">
    <link rel="stylesheet" href="./assets/compiled/css/app-dark.css">
    <link rel="stylesheet" href="./assets/compiled/css/iconly.css">
    <link rel="stylesheet" href="./assets/extensions/datatables.net-bs5/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="./assets/compiled/css/table-datatable-jquery.css">
    <link rel="stylesheet" href="./assets/extensions/flatpickr/flatpickr.min.css">
</head>

<body>
    <script src="assets/static/js/initTheme.js"></script>
    <div id="app">
        <div id="main" class="layout-horizontal">
            <header class="mb-5">
                <div class="header-top">
                    <div class="container">
                        <div class="logo">
                            <a href="admin.html"><img src="./assets/compiled/svg/logo.svg" alt="Logo"> </a>
                        </div>
                        <div class="header-top-right">
                            <div class="dropdown">
                                <a href="#" id="topbarUserDropdown" class="user-dropdown d-flex align-items-center dropend dropdown-toggle " data-bs-toggle="dropdown" aria-expanded="false">
                                    <div class="avatar avatar-md2" >
                                        <img src="./assets/compiled/jpg/1.jpg" alt="Avatar">
                                    </div>
                                    <div class="text">
                                        <h6 class="user-dropdown-name">Administrador</h6>
                                        <p class="user-dropdown-status text-sm text-muted">Administrador</p>
                                    </div>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end shadow-lg" aria-labelledby="topbarUserDropdown">
                                  <li><a class="dropdown-item" href="admin-profile.html">Mi Perfil</a></li>
                                  <li><a class="dropdown-item" href="admin-password.html">Cambiar Contraseña</a></li>
                                  <li><hr class="dropdown-divider"></li>
                                  <li><a class="dropdown-item" href="index.html">Cerrar Sesión</a></li>
                                </ul>
                            </div>

                            <!-- Burger button responsive -->
                            <a href="#" class="burger-btn d-block d-xl-none">
                                <i class="bi bi-justify fs-3"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <nav class="main-navbar">
                    <div class="container">
                        <ul>
                            <li class="menu-item">
                                <a href="admin.html" class='menu-link'>
                                    <span><i class="bi bi-grid-fill"></i> Dashboard</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-users.html" class='menu-link'>
                                    <span><i class="bi bi-people-fill"></i> Usuarios</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-games.html" class='menu-link'>
                                    <span><i class="bi bi-joystick"></i> Videojuegos</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-keys.html" class='menu-link'>
                                    <span><i class="bi bi-key-fill"></i> Réplicas</span>
                                </a>
                            </li>
                            
                            <li class="menu-item active">
                                <a href="admin-sales.html" class='menu-link'>
                                    <span><i class="bi bi-cart-fill"></i> Ventas</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-reservations.html" class='menu-link'>
                                    <span><i class="bi bi-bookmark-fill"></i> Reservas</span>
                                </a>
                            </li>
                            
                            <li class="menu-item has-sub">
                                <a href="#" class='menu-link'>
                                    <span><i class="bi bi-list-check"></i> Catálogos</span>
                                </a>
                                <div class="submenu">
                                    <div class="submenu-group-wrapper">
                                        <ul class="submenu-group">
                                            <li class="submenu-item">
                                                <a href="admin-platforms.html" class='submenu-link'>Plataformas</a>
                                            </li>
                                            <li class="submenu-item">
                                                <a href="admin-editions.html" class='submenu-link'>Ediciones</a>
                                            </li>
                                            <li class="submenu-item">
                                                <a href="admin-features.html" class='submenu-link'>Características</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </header>

            <div class="content-wrapper container">
                <div class="page-heading">
                    <h3>Gestión de Ventas</h3>
                </div>
                <div class="page-content">
                    <!-- Filtros y Estadísticas -->
                    <section class="row">
                        <div class="col-12 col-lg-9">
                            <div class="card">
                                <div class="card-header">
                                    <h4>Filtros de Ventas</h4>
                                </div>
                                <div class="card-body">
                                    <form>
                                        <div class="row">
                                            <div class="col-md-4 mb-3">
                                                <label for="dateRangeFilter" class="form-label">Periodo</label>
                                                <select class="form-select" id="dateRangeFilter">
                                                    <option value="today">Hoy</option>
                                                    <option value="yesterday">Ayer</option>
                                                    <option value="last7days">Últimos 7 días</option>
                                                    <option value="last30days" selected>Últimos 30 días</option>
                                                    <option value="thisMonth">Este mes</option>
                                                    <option value="lastMonth">Mes pasado</option>
                                                    <option value="custom">Personalizado</option>
                                                </select>
                                            </div>
                                            <div class="col-md-8 mb-3" id="customDateRange" style="display: none;">
                                                <label class="form-label">Rango Personalizado</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control flatpickr-range" placeholder="Seleccionar rango de fechas">
                                                    <span class="input-group-text"><i class="bi bi-calendar"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4 mb-3">
                                                <label for="userFilter" class="form-label">Usuario</label>
                                                <select class="form-select" id="userFilter">
                                                    <option value="" selected>Todos los usuarios</option>
                                                    <option value="1">Juan Pérez</option>
                                                    <option value="2">Ana López</option>
                                                    <option value="3">Mario García</option>
                                                    <option value="4">Laura Martínez</option>
                                                    <option value="5">Roberto Sánchez</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4 mb-3">
                                                <label for="gameFilter" class="form-label">Juego</label>
                                                <select class="form-select" id="gameFilter">
                                                    <option value="" selected>Todos los juegos</option>
                                                    <option value="1">The Witcher 3: Wild Hunt</option>
                                                    <option value="2">Cyberpunk 2077</option>
                                                    <option value="3">Red Dead Redemption 2</option>
                                                    <option value="4">GTA V</option>
                                                    <option value="5">Elden Ring</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4 mb-3">
                                                <label for="platformFilter" class="form-label">Plataforma</label>
                                                <select class="form-select" id="platformFilter">
                                                    <option value="" selected>Todas las plataformas</option>
                                                    <option value="1">PC</option>
                                                    <option value="2">PlayStation 5</option>
                                                    <option value="3">PlayStation 4</option>
                                                    <option value="4">Xbox Series X|S</option>
                                                    <option value="5">Xbox One</option>
                                                    <option value="6">Nintendo Switch</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-end">
                                            <button type="button" class="btn btn-light me-2">Limpiar</button>
                                            <button type="button" class="btn btn-primary">Aplicar Filtros</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-3">
                            <div class="card">
                                <div class="card-header">
                                    <h4>Resumen de Ventas</h4>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card border shadow-none mb-3">
                                                <div class="card-body p-3">
                                                    <div class="d-flex align-items-center">
                                                        <div class="avatar avatar-md">
                                                            <div class="avatar-initial bg-primary rounded">
                                                                <i class="bi bi-receipt text-white"></i>
                                                            </div>
                                                        </div>
                                                        <div class="ms-3">
                                                            <h5 class="mb-0">Total Ventas</h5>
                                                            <p class="mb-0 text-muted">586</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="card border shadow-none mb-3">
                                                <div class="card-body p-3">
                                                    <div class="d-flex align-items-center">
                                                        <div class="avatar avatar-md">
                                                            <div class="avatar-initial bg-success rounded">
                                                                <i class="bi bi-currency-euro text-white"></i>
                                                            </div>
                                                        </div>
                                                        <div class="ms-3">
                                                            <h5 class="mb-0">Ingresos</h5>
                                                            <p class="mb-0 text-muted">€ 28,945.50</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="card border shadow-none mb-0">
                                                <div class="card-body p-3">
                                                    <div class="d-flex align-items-center">
                                                        <div class="avatar avatar-md">
                                                            <div class="avatar-initial bg-info rounded">
                                                                <i class="bi bi-graph-up-arrow text-white"></i>
                                                            </div>
                                                        </div>
                                                        <div class="ms-3">
                                                            <h5 class="mb-0">Precio Promedio</h5>
                                                            <p class="mb-0 text-muted">€ 49.39</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Lista de Ventas -->
                    <section class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4>Lista de Ventas</h4>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped" id="salesTable">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Fecha</th>
                                                    <th>Usuario</th>
                                                    <th>Juego</th>
                                                    <th>Edición</th>
                                                    <th>Plataforma</th>
                                                    <th>Precio</th>
                                                    <th>Estado</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>04/05/2025</td>
                                                    <td>Juan Pérez</td>
                                                    <td>The Witcher 3: Wild Hunt</td>
                                                    <td>Game of the Year</td>
                                                    <td>PC</td>
                                                    <td>€ 39.99</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#sendInvoiceModal"><i class="bi bi-envelope"></i> Enviar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#cancelSaleModal"><i class="bi bi-x-circle"></i> Cancelar Venta</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>03/05/2025</td>
                                                    <td>Ana López</td>
                                                    <td>Cyberpunk 2077</td>
                                                    <td>Edición Deluxe</td>
                                                    <td>PlayStation 5</td>
                                                    <td>€ 59.99</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#sendInvoiceModal"><i class="bi bi-envelope"></i> Enviar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#cancelSaleModal"><i class="bi bi-x-circle"></i> Cancelar Venta</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>02/05/2025</td>
                                                    <td>Mario García</td>
                                                    <td>Red Dead Redemption 2</td>
                                                    <td>Ultimate Edition</td>
                                                    <td>Xbox Series X</td>
                                                    <td>€ 54.99</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#sendInvoiceModal"><i class="bi bi-envelope"></i> Enviar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#cancelSaleModal"><i class="bi bi-x-circle"></i> Cancelar Venta</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>4</td>
                                                    <td>01/05/2025</td>
                                                    <td>Laura Martínez</td>
                                                    <td>Elden Ring</td>
                                                    <td>Estándar</td>
                                                    <td>PC</td>
                                                    <td>€ 49.99</td>
                                                    <td><span class="badge bg-warning">Pendiente</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#sendInvoiceModal"><i class="bi bi-envelope"></i> Enviar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#cancelSaleModal"><i class="bi bi-x-circle"></i> Cancelar Venta</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>5</td>
                                                    <td>28/04/2025</td>
                                                    <td>Roberto Sánchez</td>
                                                    <td>GTA V</td>
                                                    <td>Premium Edition</td>
                                                    <td>PlayStation 4</td>
                                                    <td>€ 29.99</td>
                                                    <td><span class="badge bg-danger">Cancelada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#sendInvoiceModal"><i class="bi bi-envelope"></i> Enviar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-success" href="#" data-bs-toggle="modal" data-bs-target="#restoreSaleModal"><i class="bi bi-arrow-repeat"></i> Restaurar Venta</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Estadísticas Ventas por Juego -->
                    <section class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4>Ventas por Juego</h4>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Juego</th>
                                                    <th>Cantidad Vendida</th>
                                                    <th>Ingresos</th>
                                                    <th>Precio Promedio</th>
                                                    <th>% del Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar avatar-md me-3">
                                                                <img src="./assets/compiled/jpg/1.jpg">
                                                            </div>
                                                            <div>
                                                                <h6 class="mb-0">The Witcher 3: Wild Hunt</h6>
                                                                <p class="text-muted mb-0">CD Projekt RED</p>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>254</td>
                                                    <td>€ 9,652</td>
                                                    <td>€ 38.00</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">33.4%</span>
                                                            <div class="progress" style="width: 100px; height: 5px">
                                                                <div class="progress-bar" role="progressbar" style="width: 33.4%" aria-valuenow="33.4" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar avatar-md me-3">
                                                                <img src="./assets/compiled/jpg/2.jpg">
                                                            </div>
                                                            <div>
                                                                <h6 class="mb-0">Cyberpunk 2077</h6>
                                                                <p class="text-muted mb-0">CD Projekt RED</p>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>198</td>
                                                    <td>€ 8,910</td>
                                                    <td>€ 45.00</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">30.8%</span>
                                                            <div class="progress" style="width: 100px; height: 5px">
                                                                <div class="progress-bar" role="progressbar" style="width: 30.8%" aria-valuenow="30.8" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar avatar-md me-3">
                                                                <img src="./assets/compiled/jpg/3.jpg">
                                                            </div>
                                                            <div>
                                                                <h6 class="mb-0">Red Dead Redemption 2</h6>
                                                                <p class="text-muted mb-0">Rockstar Games</p>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>157</td>
                                                    <td>€ 7,065</td>
                                                    <td>€ 45.00</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">24.4%</span>
                                                            <div class="progress" style="width: 100px; height: 5px">
                                                                <div class="progress-bar" role="progressbar" style="width: 24.4%" aria-valuenow="24.4" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar avatar-md me-3">
                                                                <img src="./assets/compiled/jpg/4.jpg">
                                                            </div>
                                                            <div>
                                                                <h6 class="mb-0">GTA V</h6>
                                                                <p class="text-muted mb-0">Rockstar Games</p>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>102</td>
                                                    <td>€ 3,060</td>
                                                    <td>€ 30.00</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">10.6%</span>
                                                            <div class="progress" style="width: 100px; height: 5px">
                                                                <div class="progress-bar" role="progressbar" style="width: 10.6%" aria-valuenow="10.6" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar avatar-md me-3">
                                                                <img src="./assets/compiled/jpg/5.jpg">
                                                            </div>
                                                            <div>
                                                                <h6 class="mb-0">Elden Ring</h6>
                                                                <p class="text-muted mb-0">FromSoftware</p>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>85</td>
                                                    <td>€ 4,250</td>
                                                    <td>€ 50.00</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">14.7%</span>
                                                            <div class="progress" style="width: 100px; height: 5px">
                                                                <div class="progress-bar" role="progressbar" style="width: 14.7%" aria-valuenow="14.7" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <footer>
                <div class="container">
                    <div class="footer clearfix mb-0 text-muted">
                        <div class="float-start">
                            <p>2025 &copy; GGDeals Admin</p>
                        </div>
                        
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modales -->
    <!-- Modal Ver Venta -->
    <div class="modal fade" id="viewSaleModal" tabindex="-1" aria-labelledby="viewSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewSaleModalLabel">Detalles de la Venta #1</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6 class="text-muted">Información de la Venta</h6>
                            <div class="mt-3">
                                <p class="mb-1"><strong>ID de Venta:</strong> #1</p>
                                <p class="mb-1"><strong>Fecha:</strong> 04/05/2025 15:23:45</p>
                                <p class="mb-1"><strong>Estado:</strong> <span class="badge bg-success">Completada</span></p>
                                <p class="mb-1"><strong>Método de Pago:</strong> Tarjeta de Crédito</p>
                                <p class="mb-1"><strong>Total:</strong> <span class="font-bold">€ 39.99</span></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-muted">Información del Cliente</h6>
                            <div class="mt-3">
                                <p class="mb-1"><strong>Nombre:</strong> Juan Pérez</p>
                                <p class="mb-1"><strong>Email:</strong> juan.perez@email.com</p>
                                <p class="mb-1"><strong>ID de Cliente:</strong> #1</p>
                                <p class="mb-1"><strong>Tipo de Cliente:</strong> Regular</p>
                                <p class="mb-1"><strong>Total Compras:</strong> 8</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <h6 class="text-muted">Producto Comprado</h6>
                            <div class="table-responsive mt-3">
                                <table class="table table-bordered table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Producto</th>
                                            <th>Edición</th>
                                            <th>Plataforma</th>
                                            <th>Clave de Activación</th>
                                            <th>Precio</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="./assets/compiled/jpg/1.jpg" width="40" height="40" class="rounded me-2">
                                                    <span>The Witcher 3: Wild Hunt</span>
                                                </div>
                                            </td>
                                            <td>Game of the Year</td>
                                            <td>PC</td>
                                            <td><code>AAAA-AAAA-AAAA-AAAA</code></td>
                                            <td>€ 39.99</td>
                                        </tr>
                                    </tbody>
                                    <tfoot class="table-light">
                                        <tr>
                                            <td colspan="4" class="text-end"><strong>Total</strong></td>
                                            <td><strong>€ 39.99</strong></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12">
                            <h6 class="text-muted">Historial de la Venta</h6>
                            <div class="timeline mt-3">
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-success"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-0">04/05/2025 - 15:23:45</h6>
                                        <p>Venta completada con éxito</p>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-info"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-0">04/05/2025 - 15:22:30</h6>
                                        <p>Pago procesado correctamente</p>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-primary"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-0">04/05/2025 - 15:20:15</h6>
                                        <p>Carrito confirmado</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a href="#" class="btn btn-primary"><i class="bi bi-printer"></i> Imprimir Factura</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar Venta -->
    <div class="modal fade" id="editSaleModal" tabindex="-1" aria-labelledby="editSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSaleModalLabel">Editar Venta #1</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="editSaleStatus" class="form-label">Estado</label>
                            <select class="form-select" id="editSaleStatus">
                                <option value="completed" selected>Completada</option>
                                <option value="pending">Pendiente</option>
                                <option value="cancelled">Cancelada</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editSalePaymentMethod" class="form-label">Método de Pago</label>
                            <select class="form-select" id="editSalePaymentMethod">
                                <option value="credit_card" selected>Tarjeta de Crédito</option>
                                <option value="paypal">PayPal</option>
                                <option value="bank_transfer">Transferencia Bancaria</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editSaleDate" class="form-label">Fecha y Hora</label>
                            <input type="text" class="form-control flatpickr-datetime" id="editSaleDate" value="04/05/2025 15:23:45">
                        </div>
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-circle"></i> Cambiar detalles de la venta puede afectar a las estadísticas y reportes. Asegúrate de que los cambios son necesarios.
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">Guardar Cambios</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Enviar Factura -->
    <div class="modal fade" id="sendInvoiceModal" tabindex="-1" aria-labelledby="sendInvoiceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="sendInvoiceModalLabel">Enviar Factura</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="invoiceEmail" class="form-label">Email del Cliente</label>
                            <input type="email" class="form-control" id="invoiceEmail" value="juan.perez@email.com">
                        </div>
                        <div class="mb-3">
                            <label for="invoiceSubject" class="form-label">Asunto</label>
                            <input type="text" class="form-control" id="invoiceSubject" value="Tu factura para la compra #1 - GGDeals">
                        </div>
                        <div class="mb-3">
                            <label for="invoiceMessage" class="form-label">Mensaje</label>
                            <textarea class="form-control" id="invoiceMessage" rows="4">Estimado Juan Pérez,

Adjunto encontrarás la factura de tu reciente compra en GGDeals. Gracias por tu compra.

Saludos,
El equipo de GGDeals</textarea>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="attachInvoicePdf" checked>
                            <label class="form-check-label" for="attachInvoicePdf">
                                Adjuntar factura en PDF
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">Enviar Factura</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Cancelar Venta -->
    <div class="modal fade" id="cancelSaleModal" tabindex="-1" aria-labelledby="cancelSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cancelSaleModalLabel">Cancelar Venta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="bi bi-exclamation-triangle text-danger" style="font-size: 3rem;"></i>
                        <h4 class="mt-3">¿Estás seguro?</h4>
                        <p>¿Realmente deseas cancelar la venta <strong>#1</strong> de <strong>Juan Pérez</strong>?</p>
                    </div>
                    <div class="mb-3">
                        <label for="cancelReason" class="form-label">Motivo de Cancelación</label>
                        <select class="form-select" id="cancelReason">
                            <option value="" selected disabled>Selecciona un motivo</option>
                            <option value="customer_request">Solicitud del cliente</option>
                            <option value="payment_issue">Problema con el pago</option>
                            <option value="duplicate_order">Pedido duplicado</option>
                            <option value="out_of_stock">Sin stock disponible</option>
                            <option value="other">Otro</option>
                        </select>
                    </div>
                    <div class="mb-3" id="otherReasonContainer" style="display: none;">
                        <label for="otherReason" class="form-label">Especificar otro motivo</label>
                        <textarea class="form-control" id="otherReason" rows="3"></textarea>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="refundPayment">
                        <label class="form-check-label" for="refundPayment">
                            Reembolsar el pago al cliente
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="returnToInventory" checked>
                        <label class="form-check-label" for="returnToInventory">
                            Devolver réplica al inventario
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyCustomer" checked>
                        <label class="form-check-label" for="notifyCustomer">
                            Notificar al cliente por email
                        </label>
                    </div>
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-circle"></i> Esta acción no se puede deshacer. Si la venta ya ha sido completada, se generará un reembolso.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Volver</button>
                    <button type="button" class="btn btn-danger">Confirmar Cancelación</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Restaurar Venta -->
    <div class="modal fade" id="restoreSaleModal" tabindex="-1" aria-labelledby="restoreSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="restoreSaleModalLabel">Restaurar Venta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="bi bi-arrow-repeat text-primary" style="font-size: 3rem;"></i>
                        <h4 class="mt-3">¿Restaurar esta venta?</h4>
                        <p>Estás a punto de restaurar la venta <strong>#5</strong> de <strong>Roberto Sánchez</strong> que fue cancelada anteriormente.</p>
                    </div>
                    <div class="mb-3">
                        <label for="restoreStatus" class="form-label">Estado después de restaurar</label>
                        <select class="form-select" id="restoreStatus">
                            <option value="completed">Completada</option>
                            <option value="pending" selected>Pendiente</option>
                        </select>
                    </div>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> Al restaurar esta venta, se volverá a asignar la réplica al cliente y se actualizarán las estadísticas de ventas.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">Restaurar Venta</button>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/static/js/components/dark.js"></script>
    <script src="assets/static/js/pages/horizontal-layout.js"></script>
    <script src="assets/extensions/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/compiled/js/app.js"></script>
    <script src="assets/extensions/jquery/jquery.min.js"></script>
    <script src="assets/extensions/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="assets/extensions/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>
    <script src="assets/extensions/flatpickr/flatpickr.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Inicializar DataTable
            var table = $('#salesTable').DataTable({
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json"
                },
                "order": [[1, 'desc']], // Ordenar por fecha (descendente)
            });
            
            // Inicializar Flatpickr para rangos de fechas
            flatpickr(".flatpickr-range", {
                mode: "range",
                dateFormat: "d/m/Y",
                locale: {
                    firstDayOfWeek: 1,
                    weekdays: {
                        shorthand: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sa'],
                        longhand: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado']
                    },
                    months: {
                        shorthand: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                        longhand: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
                    }
                }
            });
            
            // Inicializar Flatpickr para datetime
            flatpickr(".flatpickr-datetime", {
                enableTime: true,
                dateFormat: "d/m/Y H:i:S",
                time_24hr: true,
                locale: {
                    firstDayOfWeek: 1,
                    weekdays: {
                        shorthand: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sa'],
                        longhand: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado']
                    },
                    months: {
                        shorthand: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                        longhand: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
                    }
                }
            });
            
            // Mostrar/ocultar campos dependiendo de la selección
            $('#dateRangeFilter').change(function() {
                if ($(this).val() === 'custom') {
                    $('#customDateRange').show();
                } else {
                    $('#customDateRange').hide();
                }
            });
            
            $('#cancelReason').change(function() {
                if ($(this).val() === 'other') {
                    $('#otherReasonContainer').show();
                } else {
                    $('#otherReasonContainer').hide();
                }
            });
            
        });
    </script>
</body>

</html>