<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Ventas - GGDeals</title>
    
    <!-- Enlaces CSS -->
    <link rel="shortcut icon" href="./assets/compiled/svg/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="./assets/compiled/css/app.css">
    <link rel="stylesheet" href="./assets/compiled/css/app-dark.css">
    <link rel="stylesheet" href="./assets/compiled/css/iconly.css">
    <link rel="stylesheet" href="./assets/extensions/datatables.net-bs5/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="./assets/compiled/css/table-datatable-jquery.css">
    <link rel="stylesheet" href="./assets/extensions/bootstrap-icons/font/bootstrap-icons.css">
    <!-- CSS de Flatpickr para el calendario -->
    <link rel="stylesheet" href="./assets/extensions/flatpickr/flatpickr.min.css">
</head>

<body>
    <script src="assets/static/js/initTheme.js"></script>
    <div id="app">
        <div id="main" class="layout-horizontal">
            <header class="mb-5">
                <div class="header-top">
                    <div class="container">
                        <div class="logo">
                            <a href="admin.html"><img src="./assets/compiled/svg/logo.svg" alt="Logo"> </a>
                        </div>
                        <div class="header-top-right">
                            <div class="dropdown">
                                <a href="#" id="topbarUserDropdown" class="user-dropdown d-flex align-items-center dropend dropdown-toggle " data-bs-toggle="dropdown" aria-expanded="false">
                                    <div class="avatar avatar-md2" >
                                        <img src="./assets/compiled/jpg/1.jpg" alt="Avatar">
                                    </div>
                                    <div class="text">
                                        <h6 class="user-dropdown-name">Administrador</h6>
                                        <p class="user-dropdown-status text-sm text-muted">Administrador</p>
                                    </div>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end shadow-lg" aria-labelledby="topbarUserDropdown">
                                  <li><a class="dropdown-item" href="admin-profile.html">Mi Perfil</a></li>
                                  <li><a class="dropdown-item" href="admin-password.html">Cambiar Contraseña</a></li>
                                  <li><hr class="dropdown-divider"></li>
                                  <li><a class="dropdown-item" href="index.html">Cerrar Sesión</a></li>
                                </ul>
                            </div>

                            <!-- Burger button responsive -->
                            <a href="#" class="burger-btn d-block d-xl-none">
                                <i class="bi bi-justify fs-3"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <nav class="main-navbar">
                    <div class="container">
                        <ul>
                            <li class="menu-item">
                                <a href="admin.html" class='menu-link'>
                                    <span><i class="bi bi-grid-fill"></i> Dashboard</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-users.html" class='menu-link'>
                                    <span><i class="bi bi-people-fill"></i> Usuarios</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-games.html" class='menu-link'>
                                    <span><i class="bi bi-joystick"></i> Videojuegos</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-keys.html" class='menu-link'>
                                    <span><i class="bi bi-key-fill"></i> Réplicas</span>
                                </a>
                            </li>
                            
                            <li class="menu-item active">
                                <a href="admin-sales.html" class='menu-link'>
                                    <span><i class="bi bi-cart-fill"></i> Ventas</span>
                                </a>
                            </li>
                            
                            <li class="menu-item">
                                <a href="admin-reservations.html" class='menu-link'>
                                    <span><i class="bi bi-bookmark-fill"></i> Reservas</span>
                                </a>
                            </li>
                            
                            <li class="menu-item has-sub">
                                <a href="#" class='menu-link'>
                                    <span><i class="bi bi-list-check"></i> Catálogos</span>
                                </a>
                                <div class="submenu">
                                    <div class="submenu-group-wrapper">
                                        <ul class="submenu-group">
                                            <li class="submenu-item">
                                                <a href="admin-platforms.html" class='submenu-link'>Plataformas</a>
                                            </li>
                                            <li class="submenu-item">
                                                <a href="admin-editions.html" class='submenu-link'>Ediciones</a>
                                            </li>
                                            <li class="submenu-item">
                                                <a href="admin-features.html" class='submenu-link'>Características</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </header>

            <div class="content-wrapper container">
                <div class="page-heading">
                    <div class="d-flex justify-content-between">
                        <h3>Gestión de Ventas</h3>
                        <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addSaleModal">
                            <i class="bi bi-plus"></i> Nueva Venta
                        </a>
                    </div>
                </div>
                <div class="page-content">
                    <section class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4>Historial de Ventas</h4>
                                        <div class="d-flex gap-2">
                                            <select class="form-select form-select-sm" id="sale-filter-status">
                                                <option value="all">Todos los periodos</option>
                                                <option value="today">Hoy</option>
                                                <option value="this-week">Esta semana</option>
                                                <option value="this-month">Este mes</option>
                                                <option value="last-30days">Últimos 30 días</option>
                                                <option value="last-90days">Últimos 90 días</option>
                                                <option value="this-year">Este año</option>
                                            </select>
                                            <select class="form-select form-select-sm" id="sale-filter-user">
                                                <option value="all">Todos los usuarios</option>
                                                <option value="1">Juan Pérez</option>
                                                <option value="2">Ana López</option>
                                                <option value="3">Mario García</option>
                                                <option value="4">Laura Martínez</option>
                                                <option value="5">Roberto Sánchez</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped" id="salesTable">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Fecha de Compra</th>
                                                    <th>Importe</th>
                                                    <th>Usuario</th>
                                                    <th>Juego (Réplica)</th>
                                                    <th>Estado</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>14/05/2025 10:23:45</td>
                                                    <td>€59.99</td>
                                                    <td>Juan Pérez (ID: 1)</td>
                                                    <td>The Witcher 3: Wild Hunt (ID: 101)</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleDetailsModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="bi bi-receipt"></i> Generar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#deleteSaleModal"><i class="bi bi-trash"></i> Eliminar</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>13/05/2025 15:30:22</td>
                                                    <td>€49.99</td>
                                                    <td>Ana López (ID: 2)</td>
                                                    <td>Cyberpunk 2077 (ID: 102)</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleDetailsModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="bi bi-receipt"></i> Generar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#deleteSaleModal"><i class="bi bi-trash"></i> Eliminar</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>12/05/2025 09:15:33</td>
                                                    <td>€39.99</td>
                                                    <td>Mario García (ID: 3)</td>
                                                    <td>Red Dead Redemption 2 (ID: 103)</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleDetailsModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="bi bi-receipt"></i> Generar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#deleteSaleModal"><i class="bi bi-trash"></i> Eliminar</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>4</td>
                                                    <td>11/05/2025 14:45:10</td>
                                                    <td>€29.99</td>
                                                    <td>Laura Martínez (ID: 4)</td>
                                                    <td>GTA V (ID: 104)</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleDetailsModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="bi bi-receipt"></i> Generar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#deleteSaleModal"><i class="bi bi-trash"></i> Eliminar</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>5</td>
                                                    <td>10/05/2025 11:20:55</td>
                                                    <td>€59.99</td>
                                                    <td>Roberto Sánchez (ID: 5)</td>
                                                    <td>Elden Ring (ID: 105)</td>
                                                    <td><span class="badge bg-success">Completada</span></td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="bi bi-three-dots-vertical"></i>
                                                            </button>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#editSaleModal"><i class="bi bi-pencil"></i> Editar</a></li>
                                                                <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#viewSaleDetailsModal"><i class="bi bi-eye"></i> Ver Detalles</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="bi bi-receipt"></i> Generar Factura</a></li>
                                                                <li><hr class="dropdown-divider"></li>
                                                                <li><a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#deleteSaleModal"><i class="bi bi-trash"></i> Eliminar</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Sección Estadísticas de Ventas -->
                    <section class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4>Resumen de Ventas</h4>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3 col-sm-6">
                                            <div class="stats-card mb-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <h6 class="text-muted">Ventas Totales</h6>
                                                        <h3 class="mb-0">€240.95</h3>
                                                    </div>
                                                    <div class="avatar bg-primary p-2">
                                                        <i class="bi bi-cash-stack text-white fs-3"></i>
                                                    </div>
                                                </div>
                                                <div class="mt-2">
                                                    <span class="text-success"><i class="bi bi-arrow-up-right"></i> 12.5%</span>
                                                    <span class="text-muted"> vs mes anterior</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-sm-6">
                                            <div class="stats-card mb-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <h6 class="text-muted">Transacciones</h6>
                                                        <h3 class="mb-0">5</h3>
                                                    </div>
                                                    <div class="avatar bg-success p-2">
                                                        <i class="bi bi-bag-check text-white fs-3"></i>
                                                    </div>
                                                </div>
                                                <div class="mt-2">
                                                    <span class="text-success"><i class="bi bi-arrow-up-right"></i> 8.2%</span>
                                                    <span class="text-muted"> vs mes anterior</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-sm-6">
                                            <div class="stats-card mb-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <h6 class="text-muted">Valor Promedio</h6>
                                                        <h3 class="mb-0">€48.19</h3>
                                                    </div>
                                                    <div class="avatar bg-info p-2">
                                                        <i class="bi bi-calculator text-white fs-3"></i>
                                                    </div>
                                                </div>
                                                <div class="mt-2">
                                                    <span class="text-danger"><i class="bi bi-arrow-down-right"></i> 3.1%</span>
                                                    <span class="text-muted"> vs mes anterior</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-sm-6">
                                            <div class="stats-card mb-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <h6 class="text-muted">Juego Más Vendido</h6>
                                                        <h5 class="mb-0">The Witcher 3</h5>
                                                    </div>
                                                    <div class="avatar bg-warning p-2">
                                                        <i class="bi bi-trophy text-white fs-3"></i>
                                                    </div>
                                                </div>
                                                <div class="mt-2">
                                                    <span class="text-muted">2 unidades vendidas</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div>
                                                <h6>Ventas por Plataforma</h6>
                                                <div class="progress-wrapper mb-4">
                                                    <div class="mb-1 d-flex justify-content-between">
                                                        <span>PC</span>
                                                        <span>45%</span>
                                                    </div>
                                                    <div class="progress progress-sm">
                                                        <div class="progress-bar bg-primary" role="progressbar" style="width: 45%" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="progress-wrapper mb-4">
                                                    <div class="mb-1 d-flex justify-content-between">
                                                        <span>PlayStation</span>
                                                        <span>30%</span>
                                                    </div>
                                                    <div class="progress progress-sm">
                                                        <div class="progress-bar bg-info" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="progress-wrapper mb-4">
                                                    <div class="mb-1 d-flex justify-content-between">
                                                        <span>Xbox</span>
                                                        <span>20%</span>
                                                    </div>
                                                    <div class="progress progress-sm">
                                                        <div class="progress-bar bg-success" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                                <div class="progress-wrapper mb-4">
                                                    <div class="mb-1 d-flex justify-content-between">
                                                        <span>Nintendo</span>
                                                        <span>5%</span>
                                                    </div>
                                                    <div class="progress progress-sm">
                                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 5%" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Ventas por Categoría de Juego</h6>
                                            <div class="table-responsive">
                                                <table class="table table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>Categoría</th>
                                                            <th>Ventas</th>
                                                            <th>Ingresos</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>RPG</td>
                                                            <td>2</td>
                                                            <td>€99.98</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Acción/Aventura</td>
                                                            <td>2</td>
                                                            <td>€89.98</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Shooter</td>
                                                            <td>1</td>
                                                            <td>€49.99</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Estrategia</td>
                                                            <td>0</td>
                                                            <td>€0.00</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <footer>
                <div class="container">
                    <div class="footer clearfix mb-0 text-muted">
                        <div class="float-start">
                            <p>2025 &copy; GGDeals Admin</p>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modal Añadir Venta -->
    <div class="modal fade" id="addSaleModal" tabindex="-1" aria-labelledby="addSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addSaleModalLabel">Añadir Nueva Venta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="addSaleDate" class="form-label">Fecha de Compra</label>
                            <input type="text" class="form-control flatpickr-datetime" id="addSaleDate" placeholder="Selecciona fecha y hora">
                        </div>
                        <div class="mb-3">
                            <label for="addSaleAmount" class="form-label">Importe</label>
                            <div class="input-group">
                                <span class="input-group-text">€</span>
                                <input type="number" class="form-control" id="addSaleAmount" placeholder="0.00" step="0.01">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="addSaleUserId" class="form-label">Usuario</label>
                            <select class="form-select" id="addSaleUserId">
                                <option value="" selected disabled>Selecciona un usuario</option>
                                <option value="1">1 - Juan Pérez</option>
                                <option value="2">2 - Ana López</option>
                                <option value="3">3 - Mario García</option>
                                <option value="4">4 - Laura Martínez</option>
                                <option value="5">5 - Roberto Sánchez</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="addSaleReplicaId" class="form-label">Réplica</label>
                            <select class="form-select" id="addSaleReplicaId">
                                <option value="" selected disabled>Selecciona una réplica</option>
                                <option value="101">101 - The Witcher 3: Wild Hunt</option>
                                <option value="102">102 - Cyberpunk 2077</option>
                                <option value="103">103 - Red Dead Redemption 2</option>
                                <option value="104">104 - GTA V</option>
                                <option value="105">105 - Elden Ring</option>
                            </select>
                        </div>
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> Al crear una venta, se registrará automáticamente y se actualizará el inventario.
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">Añadir Venta</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar Venta -->
    <div class="modal fade" id="editSaleModal" tabindex="-1" aria-labelledby="editSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSaleModalLabel">Editar Venta #1</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="editSaleId" class="form-label">ID</label>
                            <input type="text" class="form-control" id="editSaleId" value="1" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="editSaleDate" class="form-label">Fecha de Compra</label>
                            <input type="text" class="form-control flatpickr-datetime" id="editSaleDate" value="14/05/2025 10:23:45">
                        </div>
                        <div class="mb-3">
                            <label for="editSaleAmount" class="form-label">Importe</label>
                            <div class="input-group">
                                <span class="input-group-text">€</span>
                                <input type="number" class="form-control" id="editSaleAmount" value="59.99" step="0.01">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="editSaleUserId" class="form-label">Usuario</label>
                            <select class="form-select" id="editSaleUserId">
                                <option value="1" selected>1 - Juan Pérez</option>
                                <option value="2">2 - Ana López</option>
                                <option value="3">3 - Mario García</option>
                                <option value="4">4 - Laura Martínez</option>
                                <option value="5">5 - Roberto Sánchez</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editSaleReplicaId" class="form-label">Réplica</label>
                            <select class="form-select" id="editSaleReplicaId">
                                <option value="101" selected>101 - The Witcher 3: Wild Hunt</option>
                                <option value="102">102 - Cyberpunk 2077</option>
                                <option value="103">103 - Red Dead Redemption 2</option>
                                <option value="104">104 - GTA V</option>
                                <option value="105">105 - Elden Ring</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editSaleStatus" class="form-label">Estado</label>
                            <select class="form-select" id="editSaleStatus">
                                <option value="completed" selected>Completada</option>
                                <option value="processing">Procesando</option>
                                <option value="refunded">Reembolsada</option>
                                <option value="cancelled">Cancelada</option>
                            </select>
                        </div>
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-circle"></i> Cambiar detalles de la venta puede afectar a las estadísticas y reportes. Asegúrate de que los cambios son necesarios.
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">Guardar Cambios</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ver Detalles de Venta -->
    <div class="modal fade" id="viewSaleDetailsModal" tabindex="-1" aria-labelledby="viewSaleDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewSaleDetailsModalLabel">Detalles de Venta #1</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Información de la Venta</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <th>ID de Venta:</th>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <th>Fecha de Compra:</th>
                                    <td>14/05/2025 10:23:45</td>
                                </tr>
                                <tr>
                                    <th>Importe Total:</th>
                                    <td>€59.99</td>
                                </tr>
                                <tr>
                                    <th>Método de Pago:</th>
                                    <td>Tarjeta de Crédito</td>
                                </tr>
                                <tr>
                                    <th>Estado:</th>
                                    <td><span class="badge bg-success">Completada</span></td>
                                </tr>
                                <tr>
                                    <th>ID de Transacción:</th>
                                    <td>TRX123456789</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6>Información del Cliente</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <th>ID de Usuario:</th>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <th>Nombre:</th>
                                    <td>Juan Pérez</td>
                                </tr>
                                <tr>
                                    <th>Email:</th>
                                    <td>juan.perez@email.com</td>
                                </tr>
                                <tr>
                                    <th>Fecha de Registro:</th>
                                    <td>01/01/2025</td>
                                </tr>
                                <tr>
                                    <th>Total de Compras:</th>
                                    <td>3 compras</td>
                                </tr>
                                <tr>
                                    <th>Valor Total de Compras:</th>
                                    <td>€159.97</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <hr>
                    <h6>Productos Comprados</h6>
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>ID Réplica</th>
                                    <th>Plataforma</th>
                                    <th>Edición</th>
                                    <th>Precio</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <div class="avatar avatar-md me-3">
                                                <img src="./assets/compiled/jpg/1.jpg">
                                            </div>
                                            <div>
                                                <h6 class="mb-0">The Witcher 3: Wild Hunt</h6>
                                                <p class="text-muted mb-0">CD Projekt RED</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>101</td>
                                    <td>PC</td>
                                    <td>Game of the Year</td>
                                    <td>€59.99</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th colspan="4" class="text-end">Total:</th>
                                    <th>€59.99</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <hr>
                    <h6>Historial de la Venta</h6>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-left">
                                <div class="timeline-date">14/05/2025 10:23:45</div>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title text-success">Compra realizada</div>
                                <div class="timeline-subtitle">El usuario ha completado el proceso de compra.</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-left">
                                <div class="timeline-date">14/05/2025 10:23:50</div>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">Pago procesado</div>
                                <div class="timeline-subtitle">Pago recibido y procesado correctamente (TRX123456789).</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-left">
                                <div class="timeline-date">14/05/2025 10:24:15</div>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">Envío de clave de activación</div>
                                <div class="timeline-subtitle">Se ha enviado la clave de activación al correo electrónico del usuario.</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-left">
                                <div class="timeline-date">14/05/2025 10:25:00</div>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">Factura generada</div>
                                <div class="timeline-subtitle">Se ha generado y enviado la factura al cliente.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a href="#" class="btn btn-success"><i class="bi bi-receipt"></i> Generar Factura</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Eliminar Venta -->
    <div class="modal fade" id="deleteSaleModal" tabindex="-1" aria-labelledby="deleteSaleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteSaleModalLabel">Eliminar Venta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="bi bi-exclamation-triangle text-danger" style="font-size: 3rem;"></i>
                        <h4 class="mt-3">¿Estás seguro?</h4>
                        <p>¿Realmente deseas eliminar la venta #1? Esta acción no se puede deshacer.</p>
                    </div>
                    <div class="alert alert-danger">
                        <i class="bi bi-exclamation-circle"></i> La eliminación de una venta afectará a los informes financieros y estadísticas. Solo deberías eliminar ventas en caso de registros erróneos.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger">Eliminar Venta</button>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/static/js/components/dark.js"></script>
    <script src="assets/static/js/pages/horizontal-layout.js"></script>
    <script src="assets/extensions/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/compiled/js/app.js"></script>
    <script src="assets/extensions/jquery/jquery.min.js"></script>
    <script src="assets/extensions/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="assets/extensions/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>
    
    <!-- FilePond -->
    <script src="assets/extensions/filepond/filepond.js"></script>
    <script src="assets/extensions/filepond-plugin-image-preview/filepond-plugin-image-preview.js"></script>
    <script src="assets/extensions/filepond-plugin-file-validate-type/filepond-plugin-file-validate-type.js"></script>
    <script src="assets/extensions/filepond-plugin-file-validate-size/filepond-plugin-file-validate-size.js"></script>
    
    <!-- Flatpickr -->
    <script src="assets/extensions/flatpickr/flatpickr.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Inicializar DataTable
            var table = $('#salesTable').DataTable({
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json"
                }
            });
            
            // Inicializar Flatpickr para selector de fecha y hora
            flatpickr(".flatpickr-datetime", {
                enableTime: true,
                dateFormat: "d/m/Y H:i:S",
                time_24hr: true,
                locale: {
                    firstDayOfWeek: 1,
                    weekdays: {
                        shorthand: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sa'],
                        longhand: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado']
                    },
                    months: {
                        shorthand: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                        longhand: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
                    }
                }
            });
            
            // Filtros de periodo
            $('#sale-filter-status').change(function() {
                var value = $(this).val();
                
                // Aquí implementarías la lógica real de filtrado por periodo
                // Por ahora, solo mostramos un mensaje en la consola
                console.log('Filtrando por periodo: ' + value);
            });
            
            // Filtros de usuario
            $('#sale-filter-user').change(function() {
                var value = $(this).val();
                
                if (value === 'all') {
                    table.column(3).search('').draw();
                } else {
                    table.column(3).search('ID: ' + value).draw();
                }
            });
            
            // Inicializar Bootstrap tooltips
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });
        });
    </script>
</body>

</html>